<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Статистика | В ПАМЯТЬ О ПОБЕДЕ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="wwwroot/css/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <link rel="stylesheet" href="wwwroot/css/statistics.css">
    <style>
        .tab-buttons {
            display: flex;
            justify-content: center;
            margin-bottom: 40px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .tab-btn {
            padding: 12px 25px;
            background-color: #f0f0f0;
            border: none;
            border-radius: 50px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
        }
        
        .tab-btn i {
            margin-right: 8px;
        }
        
        .tab-btn.active {
            background-color: #d32f2f;
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(211,47,47,0.3);
        }
        
        .tab-btn:hover:not(.active) {
            background-color: #e0e0e0;
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .back-btn {
            display: inline-block;
            background-color: #d32f2f;
            color: white;
            padding: 10px 20px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            margin-top: 20px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .back-btn:hover {
            background-color: #b71c1c;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .back-btn i {
            margin-right: 5px;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .section-title {
            animation: slideInFromTop 0.8s ease-out;
        }
        
        @keyframes slideInFromTop {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
    </style>
</head>
<body>
    <header id="header">
        <div class="container header-container">
            <div class="logo">
                <img src="wwwroot/images/icon.svg" alt="Логотип Герб СССР">
                <div class="logo-text">
                    <h1>В ПАМЯТЬ О&nbsp;ПОБЕДЕ</h1>
                    <p>1941-1945</p>
                </div>
            </div>
            
            <button class="mobile-menu-btn" id="mobileMenuBtn">
                <i class="fas fa-bars"></i>
            </button>
            
            <nav id="mainNav">
                <ul>
                    <li><a href="index.html"><i class="fas fa-home"></i> Главная</a></li>
                    <li><a href="index.html#timeline"><i class="fas fa-history"></i> Хронология</a></li>
                    <li><a href="memorials.html"><i class="fas fa-monument"></i> Мемориал</a></li>
                    <li><a href="gallery.html"><i class="fas fa-images"></i> Галерея</a></li>
                    <li><a href="statistics.html" class="active"><i class="fas fa-chart-bar"></i> Статистика</a></li>
                    <li><a href="poll.html"><i class="fas fa-poll"></i> Опрос</a></li>
                    <li><a href="about.html"><i class="fas fa-info-circle"></i> О&nbsp;проекте</a></li>
                </ul>
            </nav>
        </div>
    </header>

	<section class="section mt-5" style="padding-top: 100px;">
        <div class="container statistics-container">
            <div class="section-title">
                <h2>Статистика</h2>
                <p>Цифры и факты о Великой Отечественной войне и восприятии роли СССР в Победе</p>
            </div>
            
            <div class="tab-buttons">
                <button class="tab-btn active" data-tab="ww2-stats">
                    <i class="fas fa-chart-line"></i> Статистика ВОВ
                </button>
                <button class="tab-btn" data-tab="poll-stats">
                    <i class="fas fa-poll"></i> Статистика опросов
                </button>
            </div>
            
            <!-- Статистика ВОВ -->
            <div id="ww2-stats" class="tab-content active">
                <!-- Потери сторон -->
                <div class="stat-card">
                    <h3 class="stat-title">Потери воюющих сторон</h3>
                    <p>Численность погибших военнослужащих и мирного населения</p>
                    
                    <div class="chart-container" id="lossesChart"></div>
                    
                    <div class="stat-grid">
                        <div class="stat-item">
                            <div class="stat-value">26.6</div>
                            <div class="stat-label">млн общих потерь СССР</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">8.7</div>
                            <div class="stat-label">млн военных потерь СССР</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">17.9</div>
                            <div class="stat-label">млн гражданских потерь СССР</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">5.3</div>
                            <div class="stat-label">млн потерь Германии</div>
                        </div>
                    </div>
                </div>
                
                <!-- Техника и вооружение -->
                <div class="stat-card">
                    <h3 class="stat-title">Техника и вооружение</h3>
                    <p>Потери боевой техники в годы войны</p>
                    
                    <div class="chart-container" id="tanksChart"></div>
                    
                    <div class="stat-grid">
                        <div class="stat-item">
                            <div class="stat-value">96.5</div>
                            <div class="stat-label">тыс. танков и САУ потерял СССР</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">35.6</div>
                            <div class="stat-label">тыс. танков и САУ потеряла Германия</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">88.3/43.1</div>
                            <div class="stat-label">тыс. небоевых/боевых самолётов потерял СССР</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">56.8</div>
                            <div class="stat-label">тыс. самолётов потеряла Германия</div>
                        </div>
                    </div>
                </div>
                
                <!-- Крупнейшие сражения -->
                <div class="stat-card full-width">
                    <h3 class="stat-title">Крупнейшие сражения</h3>
                    <p>Потери сторон в ключевых битвах Великой Отечественной войны</p>
                    
                    <div class="chart-container" id="battlesChart"></div>
                    
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Сражение</th>
                                <th>Дата</th>
                                <th>Потери СССР</th>
                                <th>Потери Германии</th>
                                <th>Итог</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Битва за Москву</td>
                                <td>30.09.1941 - 20.04.1942</td>
                                <td>658 тыс.</td>
                                <td>458 тыс.</td>
                                <td>Победа СССР</td>
                            </tr>
                            <tr>
                                <td>Сталинградская битва</td>
                                <td>17.07.1942 - 02.02.1943</td>
                                <td>1 129 тыс.</td>
                                <td>850 тыс.</td>
                                <td>Победа СССР</td>
                            </tr>
                            <tr>
                                <td>Курская битва</td>
                                <td>05.07.1943 - 23.08.1943</td>
                                <td>863 тыс.</td>
                                <td>500 тыс.</td>
                                <td>Победа СССР</td>
                            </tr>
                            <tr>
                                <td>Битва за Берлин</td>
                                <td>16.04.1945 - 08.05.1945</td>
                                <td>352 тыс.</td>
                                <td>400 тыс.</td>
                                <td>Победа СССР</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <button class="back-btn" onclick="scrollToTop()">
                    <i class="fas fa-arrow-up"></i> Наверх
                </button>
            </div>
            
            <!-- Статистика опросов -->
            <div id="poll-stats" class="tab-content">
                <div class="stat-card">
                    <div class="section-title">
                        <h2>Результаты опроса</h2>
                        <p>Анализ мнений 275 респондентов о роли СССР во Второй мировой войне</p>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-4">
                            <div class="stat-card">
                                <div class="key-number">275</div>
                                <h3>Всего ответов</h3>
                                <p>Количество участников опроса</p>
                            </div>
                        </div>
                        
                        <div class="col-md-4">
                            <div class="stat-card">
                                <div class="key-number">69.1%</div>
                                <h3>Семейная память</h3>
                                <p>Имеют истории о родственниках-участниках ВОВ</p>
                            </div>
                        </div>
                        
                        <div class="col-md-4">
                            <div class="stat-card">
                                <div class="key-number">84.4%</div>
                                <h3>Решающая роль</h3>
                                <p>Считают, что СССР сыграл решающую роль в Победе</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stat-section">
                        <h3 class="stat-section-title">Демография участников опроса</h3>
                        <div class="chart-container">
                            <canvas id="ageChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="stat-section">
                        <h3 class="stat-section-title">Интерес к истории</h3>
                        <div class="chart-container">
                            <canvas id="interestChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="stat-section">
                        <h3 class="stat-section-title">Семейные истории о ВОВ</h3>
                        <div class="chart-container">
                            <canvas id="familyChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="stat-section">
                        <h3 class="stat-section-title">Оценка роли СССР в Победе</h3>
                        <div class="chart-container">
                            <canvas id="roleChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="stat-section">
                        <h3 class="stat-section-title">Возможность Победы без СССР</h3>
                        <div class="chart-container">
                            <canvas id="victoryChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="stat-section">
                        <h3 class="stat-section-title">Ключевые события в борьбе с нацизмом</h3>
                        <div class="chart-container">
                            <canvas id="eventsChart"></canvas>
                        </div>
                    </div>
                    
                    <button class="back-btn" onclick="scrollToTop()">
                        <i class="fas fa-arrow-up"></i> Наверх
                    </button>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>О проекте</h3>
                    <p>Сайт посвященный памяти о Великой Отечественной войне и героических подвигах советского народа.</p>
                    <div class="social-links">
                        <a href="https://t.me/memoryaboutwin"><i class="fab fa-telegram"></i></a>
                        <a href="https://rutube.ru/channel/63769978/"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                
                <div class="footer-column">
                    <h3>Разделы</h3>
                    <ul class="footer-links">
                    <li><a href="index.html"><i class="fas fa-home"></i> Главная</a></li>
                    <li><a href="index.html#timeline"><i class="fas fa-history"></i> Хронология</a></li>
                    <li><a href="memorials.html"><i class="fas fa-monument"></i> Мемориал</a></li>
                    <li><a href="gallery.html"><i class="fas fa-images"></i> Галерея</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>Ресурсы</h3>
                    <ul class="footer-links">
                    <li><a href="statistics.html"><i class="fas fa-chart-bar"></i> Статистика</a></li>
                    <li><a href="poll.html"><i class="fas fa-poll"></i> Опрос</a></li>
                    <li><a href="about.html"><i class="fas fa-info-circle"></i> О&nbsp;проекте</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>Контакты</h3>
                    <p><i class="fas fa-envelope"></i> warmemory@internet.ru</p>
                    <p><i class="fas fa-map-marker-alt"></i> Тюмень, ул. Ленина, 23</p>
                </div>
            </div>
            
            <div class="footer-bottom">
                
                <img src="wwwroot/images/logo-utmn-mini.svg" width="120" height="55" alt="Тюменский государственный университет" class="no-movement">
                <p>Тюменский Государственный Университет</p>
                <p>Источник данных: ssl.rosstat.gov.ru (Юбилейный статистический сборник «Великая Отечественная война»)</p>
                <p>Г.Ф.Кривошеев (под редакцией). «Россия и СССР в войнах XX века: Потери вооруженных сил»</p>
                <p>© 2025 В ПАМЯТЬ О ПОБЕДЕ. Все права защищены.</p>
            </div>
        </div>
    </footer>
    
    <script>
        // Инициализация графиков
        document.addEventListener('DOMContentLoaded', function() {
            // Потери стран
            const lossesChart = echarts.init(document.getElementById('lossesChart'));
            lossesChart.setOption({
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'shadow'
                    }
                },
                legend: {
                    data: ['Общие потери (млн)']
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                },
                xAxis: {
                    type: 'category',
                    data: ['СССР', 'Германия', 'США', 'Великобритания']
                },
                yAxis: {
                    type: 'value',
                    name: 'Млн человек'
                },
                series: [{
                    name: 'Общие потери',
                    type: 'bar',
                    data: [
                        { value: 26.6, itemStyle: { color: '#d32f2f' } },
                        { value: 5.3, itemStyle: { color: '#424242' } },
                        { value: 5.6, itemStyle: { color: '#1976d2' } },
                        { value: 1.7, itemStyle: { color: '#7b1fa2' } },
                        { value: 2.5, itemStyle: { color: '#455a64' } },
                        { value: 1.04, itemStyle: { color: '#1976d2' } },
                        { value: 1.2, itemStyle: { color: '#7b1fa2' } }
                    ],
                    label: {
                        show: true,
                        position: 'top'
                    }
                }]
            });
            
            // Производство танков
            const tanksChart = echarts.init(document.getElementById('tanksChart'));
            tanksChart.setOption({
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'shadow'
                    }
                },
                legend: {
                    data: ['СССР', 'Германия', 'США', 'Великобритания']
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                },
                xAxis: {
                    type: 'category',
                    data: ['1941', '1942', '1943', '1944', '1945']
                },
                yAxis: {
                    type: 'value',
                    name: 'Тыс. единиц'
                },
                series: [
                    {
                        name: 'СССР',
                        type: 'bar',
                        data: [6.5, 24.7, 24.1, 29.0, 15.4],
                        itemStyle: { color: '#d32f2f' }
                    },
                    {
                        name: 'Германия',
                        type: 'bar',
                        data: [2.8, 4.9, 7.6, 12.9, 7.4],
                        itemStyle: { color: '#424242' }
                    },
                    {
                        name: 'США',
                        type: 'bar',
                        data: [4.1, 25.0, 29.5, 20.6, 11.9],
                        itemStyle: { color: '#1976d2' }
                    },
                    {
                        name: 'Великобритания',
                        type: 'bar',
                        data: [4.8, 8.6, 7.5, 5.0, 1.2],
                        itemStyle: { color: '#7b1fa2' }
                    }
                ]
            });
            
            // Потери в сражениях
            const battlesChart = echarts.init(document.getElementById('battlesChart'));
            battlesChart.setOption({
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'shadow'
                    }
                },
                legend: {
                    data: ['СССР', 'Германия']
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                },
                xAxis: {
                    type: 'category',
                    data: ['Москва', 'Сталинград', 'Курск', 'Берлин']
                },
                yAxis: {
                    type: 'value',
                    name: 'Тыс. человек'
                },
                series: [
                    {
                        name: 'СССР',
                        type: 'bar',
                        data: [658, 1129, 863, 352],
                        itemStyle: { color: '#d32f2f' }
                    },
                    {
                        name: 'Германия',
                        type: 'bar',
                        data: [458, 850, 500, 400],
                        itemStyle: { color: '#424242' }
                    }
                ]
            });
            
            // Возрастная демография
            const ageCtx = document.getElementById('ageChart').getContext('2d');
            const ageChart = new Chart(ageCtx, {
                type: 'pie',
                data: {
                    labels: ['18-25 лет', '<18 лет', '25-40 лет', '40-60 лет', '>60 лет'],
                    datasets: [{
                        data: [61.8, 23.3, 6.9, 5.8, 2.2],
                        backgroundColor: [
                            '#d32f2f',
                            '#f44336',
                            '#e57373',
                            '#ef9a9a',
                            '#ffcdd2'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Возраст участников опроса (%)',
                            font: {
                                size: 16
                            }
                        },
                        legend: {
                            position: 'right'
                        }
                    }
                }
            });
            
            // Интерес к истории
            const interestCtx = document.getElementById('interestChart').getContext('2d');
            const interestChart = new Chart(interestCtx, {
                type: 'bar',
                data: {
                    labels: ['Интересуюсь (без образования)', 'Не интересуюсь', 'Раньше интересовался', 'Интересуюсь (с образованием)'],
                    datasets: [{
                        label: 'Процент ответов',
                        data: [57.5, 26.5, 13.1, 2.9],
                        backgroundColor: '#d32f2f',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'Интерес к истории среди участников опроса (%)',
                            font: {
                                size: 16
                            }
                        }
                    }
                }
            });
            
            // Семейные истории
            const familyCtx = document.getElementById('familyChart').getContext('2d');
            const familyChart = new Chart(familyCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Есть истории', 'Не в курсе', 'Отсутствуют'],
                    datasets: [{
                        data: [69.1, 17.8, 13.1],
                        backgroundColor: [
                            '#d32f2f',
                            '#f44336',
                            '#ffcdd2'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Наличие семейных историй о ВОВ (%)',
                            font: {
                                size: 16
                            }
                        },
                        legend: {
                            position: 'right'
                        }
                    }
                }
            });
            
            // Роль СССР
            const roleCtx = document.getElementById('roleChart').getContext('2d');
            const roleChart = new Chart(roleCtx, {
                type: 'pie',
                data: {
                    labels: ['Решающая роль', 'Такой же вклад', 'Не оказал влияния', 'Роль незначительна'],
                    datasets: [{
                        data: [84.4, 12, 2.2, 1.5],
                        backgroundColor: [
                            '#d32f2f',
                            '#f44336',
                            '#e57373',
                            '#ffcdd2'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Оценка роли СССР в Победе над нацизмом (%)',
                            font: {
                                size: 16
                            }
                        },
                        legend: {
                            position: 'right'
                        }
                    }
                }
            });
            
            // Возможность Победы без СССР
            const victoryCtx = document.getElementById('victoryChart').getContext('2d');
            const victoryChart = new Chart(victoryCtx, {
                type: 'pie',
                data: {
                    labels: ['Невозможно', 'Возможно'],
                    datasets: [{
                        data: [62.5, 37.5],
                        backgroundColor: [
                            '#d32f2f',
                            '#ffcdd2'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Возможность Победы без участия СССР (%)',
                            font: {
                                size: 16
                            }
                        },
                        legend: {
                            position: 'right'
                        }
                    }
                }
            });
            
            // Ключевые события
            const eventsCtx = document.getElementById('eventsChart').getContext('2d');
            const eventsChart = new Chart(eventsCtx, {
                type: 'bar',
                data: {
                    labels: [
                        'Сталинградская битва', 
                        'Снятие блокады Ленинграда', 
                        'Битва за Москву', 
                        'Курская битва', 
                        'Берлинская операция',
                        'Операция "Багратион"',
                        'Освобождение Европы',
                        '10 сталинских ударов',
                        'Конференции союзников',
                        'Битва за Днепр',
                        'Операция "Концерт"'
                    ],
                    datasets: [{
                        label: 'Процент ответов',
                        data: [16.6, 14.5, 12.8, 12, 10.4, 8.1, 6.6, 6, 5.1, 4.3, 3.6],
                        backgroundColor: '#d32f2f',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    indexAxis: 'y',
                    scales: {
                        x: {
                            beginAtZero: true
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'Ключевые события в борьбе с нацизмом (%)',
                            font: {
                                size: 16
                            }
                        },
                        legend: {
                            display: false
                        }
                    }
                }
            });
            
            // Переключение между вкладками
            const tabBtns = document.querySelectorAll('.tab-btn');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    // Удаляем активный класс у всех кнопок и контента
                    tabBtns.forEach(btn => btn.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));
                    
                    // Добавляем активный класс к выбранной кнопке и соответствующему контенту
                    btn.classList.add('active');
                    const tabId = btn.getAttribute('data-tab');
                    document.getElementById(tabId).classList.add('active');
                });
            });
            
            // Адаптация графиков при изменении размера
            window.addEventListener('resize', function() {
                lossesChart.resize();
                tanksChart.resize();
                battlesChart.resize();
                ageChart.resize();
                interestChart.resize();
                familyChart.resize();
                roleChart.resize();
                victoryChart.resize();
                eventsChart.resize();
            });
        });
        
        // Прокрутка наверх
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }
        
        // Обработка навигации
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
                
                if (window.innerWidth <= 768) {
                    document.getElementById('mainNav').classList.remove('active');
                }
            });
        });
        
        // Фиксация шапки при скролле
        window.addEventListener('scroll', function() {
            const header = document.getElementById('header');
            if (window.scrollY > 100) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
        });
        
        // Мобильное меню
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const mainNav = document.getElementById('mainNav');
        
        mobileMenuBtn.addEventListener('click', function() {
            mainNav.classList.toggle('active');
        });
    </script>
</body>
</html>
